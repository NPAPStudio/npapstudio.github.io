"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[640],{73700:function(le,O,e){e.d(O,{Z:function(){return c}});var V=e(5574),d=e.n(V),W=e(15009),i=e.n(W),Q=e(99289),S=e.n(Q),$=e(12444),q=e.n($),Z=e(72004),A=e.n(Z),K=e(41467),G=function(){function g(){q()(this,g)}return A()(g,[{key:"import",value:function(){var l=S()(i()().mark(function v(m){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,K.db.importData(m.db);case 2:return localStorage.clear(),Object.keys(m.localStorage).forEach(function(r){localStorage.setItem(r,m.localStorage[r])}),s.abrupt("return",!0);case 5:case"end":return s.stop()}},v)}));function u(v){return l.apply(this,arguments)}return u}()},{key:"export",value:function(){var l=S()(i()().mark(function v(){var m,x,s,r;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.db.exportData();case 2:return t.t0=t.sent,t.t1=localStorage,m={db:t.t0,localStorage:t.t1},x=new Blob([JSON.stringify(m,null,4)],{type:"application/json"}),s=URL.createObjectURL(x),r=document.createElement("a"),r.href=s,r.download="gpt_playground_export_".concat(new Date().getTime(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),t.abrupt("return",m);case 15:case"end":return t.stop()}},v)}));function u(){return l.apply(this,arguments)}return u}()}]),g}(),a=G,_=e(64082),ee=e(65170),k=e(23323),J=e(25278),U=e(14726),P=e(96311),H=e(28558),C=e(67294),M={settingModalContent:"settingModalContent___n5Msb",settingModalMenu:"settingModalMenu___XTpKy",modelItem:"modelItem___k8hgT"},n=e(85893),I=ee.Z.Dragger,T=function(l){var u=l.isSettingModalOpen,v=l.handleSettingOk,m=l.handleSettingCancel,x=(0,C.useState)("token"),s=d()(x,2),r=s[0],B=s[1],t=JSON.parse(localStorage.getItem("openai_config")||"{}"),ne=(0,C.useState)((t==null?void 0:t.api_key)||""),Y=d()(ne,2),F=Y[0],R=Y[1],ce=(0,C.useState)((t==null?void 0:t.end_point)||""),ie=d()(ce,2),te=ie[0],me=ie[1];(0,C.useEffect)(function(){var h=JSON.parse(localStorage.getItem("openai_config")||"{}");h.api_key=F,h.end_point=te||"https://api.openai.com",localStorage.setItem("openai_config",JSON.stringify(h))},[F,te]);var pe=function(p){B(p.key)},fe=function(){var h=S()(i()().mark(function p(){var j;return i()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return j=new a,L.next=3,j.export();case 3:case"end":return L.stop()}},p)}));return function(){return h.apply(this,arguments)}}(),ve=function(){var h=S()(i()().mark(function p(j){var z;return i()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:z=new FileReader,z.onload=function(){var xe=S()(i()().mark(function se(re){var oe,ue,de;return i()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return ue=JSON.parse(re==null||(oe=re.target)===null||oe===void 0?void 0:oe.result),de=new a,X.next=4,de.import(ue);case 4:window.location.reload();case 5:case"end":return X.stop()}},se)}));return function(se){return xe.apply(this,arguments)}}(),z.readAsText(j);case 3:case"end":return ae.stop()}},p)}));return function(j){return h.apply(this,arguments)}}(),he=function(p){R(p.api_key),me(p.end_point)},ge=function(){return r==="token"?(0,n.jsxs)(k.Z,{name:"basic",labelCol:{span:18},wrapperCol:{span:18},initialValues:{api_key:F,end_point:te},onFinish:he,autoComplete:"off",layout:"vertical",children:[(0,n.jsx)("h2",{children:"API KEY Settings"}),(0,n.jsx)("br",{}),(0,n.jsx)(k.Z.Item,{label:"API KEY",name:"api_key",rules:[{required:!0,message:""}],children:(0,n.jsx)(J.Z,{})}),(0,n.jsx)(k.Z.Item,{label:"End Point",name:"end_point",rules:[{required:!1,message:""}],children:(0,n.jsx)(J.Z,{})}),(0,n.jsx)(k.Z.Item,{wrapperCol:{offset:0,span:24},children:(0,n.jsx)(U.ZP,{type:"primary",htmlType:"submit",children:"Save"})})]}):r==="import_export"?(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Import & Export"}),(0,n.jsx)("br",{}),(0,n.jsx)("h3",{children:"Export"}),(0,n.jsx)(U.ZP,{type:"primary",onClick:fe,children:"Export"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("h3",{children:"Import"}),(0,n.jsxs)(I,{multiple:!1,onChange:function(j){j.file.status==="done"&&ve(j.file.originFileObj)},children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(_.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})]}):null},ye=[{key:"token",label:"API KEY"},{key:"import_export",label:"Import & Export"}];return(0,n.jsx)(P.Z,{title:"",open:u,onOk:v,onCancel:m,footer:null,closeIcon:null,classNames:{content:M.settingModalContent},width:"65%",children:(0,n.jsxs)("div",{style:{display:"flex",height:"60vh",padding:0},children:[(0,n.jsx)(H.Z,{mode:"inline",className:M.settingModalMenu,selectedKeys:[r],onClick:pe,items:ye}),(0,n.jsx)("div",{style:{padding:"20px",flex:1,overflowY:"auto"},children:ge()})]})})},D=T,b=D,E=e(42952),N=e(50228),w=e(38545),y=e(35312),f={mainMenuFooter:"mainMenuFooter___dbT6T"},o=function(l){var u=l.page,v=JSON.parse(localStorage.getItem("openai_config")||"{}"),m=(0,C.useState)(!v.api_key),x=d()(m,2),s=x[0],r=x[1],B=[{key:"setting",icon:(0,n.jsx)(E.Z,{}),label:"Setting"}];u==="chat"&&B.unshift({key:"bot",icon:(0,n.jsx)(N.Z,{}),label:"Bots"}),u==="bot"&&B.unshift({key:"chat",icon:(0,n.jsx)(w.Z,{}),label:"Chats"});var t=function(R){R&&R.key==="setting"?r(!0):y.history.push("/".concat(R==null?void 0:R.key))},ne=function(){JSON.parse(localStorage.getItem("openai_config")||"{}").api_key&&r(!1)},Y=function(){r(!1)};return(0,n.jsxs)("div",{className:f.mainMenuFooter,children:[(0,n.jsx)(H.Z,{items:B,onClick:t,selectable:!1}),(0,n.jsx)(b,{isSettingModalOpen:s,handleSettingOk:ne,handleSettingCancel:Y})]})},c=o},36681:function(le,O,e){e.r(O),e.d(O,{default:function(){return C}});var V=e(15009),d=e.n(V),W=e(99289),i=e.n(W),Q=e(5574),S=e.n(Q),$=e(67984),q=e(89705),Z=e(35312),A=e(86250),K=e(47988),G=e(14726),a=e(85893);function _(M){var n=M.item,I=M.onDelete,T=new $.Z(n.botId),D=function(){var E=i()(d()().mark(function N(){return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,T.delete();case 2:I&&I(n.botId);case 3:case"end":return y.stop()}},N)}));return function(){return E.apply(this,arguments)}}(),b=[{key:"delete",danger:!0,label:(0,a.jsx)("span",{onClick:function(){return D()},children:"Delete"})}];return(0,a.jsxs)(A.Z,{gap:"0",className:"main-menu-item",justify:"space-between",align:"center",style:{width:"100%"},children:[(0,a.jsx)(Z.Link,{to:n.path,className:"main-menu-link",children:(0,a.jsx)("span",{children:n.name})}),(0,a.jsx)(K.Z,{menu:{items:b},trigger:["click"],className:"main-menu-action",children:(0,a.jsx)(G.ZP,{icon:(0,a.jsx)(q.Z,{}),size:"small",type:"text"})})]})}var ee=_,k=e(73700),J=e(24969),U=e(64917),P=e(67294),H=e(80410),C=function(){var M=P.useState([]),n=S()(M,2),I=n[0],T=n[1],D=function(){var f=i()(d()().mark(function o(){var c;return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,$.Z.getAll();case 2:c=l.sent,T(c);case 4:case"end":return l.stop()}},o)}));return function(){return f.apply(this,arguments)}}();(0,P.useEffect)(function(){D()},[]),(0,P.useEffect)(function(){D()},[location.pathname]);var b=function(){var f=i()(d()().mark(function o(c){var g;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:g=I.filter(function(v){return v.id!==c}),T(g),location.pathname.match(c.toString())&&Z.history.push("/bot");case 3:case"end":return u.stop()}},o)}));return function(c){return f.apply(this,arguments)}}(),E=function(){var o=function(){Z.history.push("/bot")};return(0,a.jsx)(A.Z,{className:H.Z.mainMenuHeader,gap:"small",justify:"space-between",style:{width:"100%"},children:(0,a.jsx)(G.ZP,{icon:(0,a.jsx)(J.Z,{}),shape:"circle",size:"small",onClick:o})})},N=function(){return I.map(function(o){return{botId:o.id,name:o.title,path:"/bot/"+o.id,key:"/bot/"+o.id}})},w=function(o,c){return console.log(c),(0,a.jsx)(ee,{item:o,onDelete:b})},y=function(){return(0,k.Z)({page:"bot"})};return(0,a.jsx)(U.f,{siderWidth:240,menuHeaderRender:E,menuDataRender:N,menuItemRender:w,menuFooterRender:y,menuProps:{selectable:!1},collapsedButtonRender:function(){return(0,a.jsx)("div",{})},children:(0,a.jsx)(Z.Outlet,{})})}},80410:function(le,O){O.Z={mainMenuGroupTitle:"mainMenuGroupTitle___hweHk","ant-menu":"ant-menu___y2T4k","ant-menu-item-disabled":"ant-menu-item-disabled___DfiXc","ant-pro-sider-menu":"ant-pro-sider-menu___L9jfK","ant-menu-item":"ant-menu-item___eeuhi","main-menu-item":"main-menu-item___LtHgB","main-menu-link":"main-menu-link___frrYk","main-menu-action":"main-menu-action___nUvpj","ant-menu-item-selected":"ant-menu-item-selected___erhGe"}}}]);
