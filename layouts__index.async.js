"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[717],{73700:function(oe,E,e){e.d(E,{Z:function(){return g}});var Y=e(5574),D=e.n(Y),z=e(15009),j=e.n(z),V=e(99289),m=e.n(V),W=e(12444),A=e.n(W),X=e(72004),F=e.n(X),G=e(41467),Q=function(){function i(){A()(this,i)}return F()(i,[{key:"import",value:function(){var f=m()(j()().mark(function x(u){return j()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,G.db.importData(u.db);case 2:return localStorage.clear(),Object.keys(u.localStorage).forEach(function(n){localStorage.setItem(n,u.localStorage[n])}),a.abrupt("return",!0);case 5:case"end":return a.stop()}},x)}));function y(x){return f.apply(this,arguments)}return y}()},{key:"export",value:function(){var f=m()(j()().mark(function x(){var u,s,a,n;return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,G.db.exportData();case 2:return r.t0=r.sent,r.t1=localStorage,u={db:r.t0,localStorage:r.t1},s=new Blob([JSON.stringify(u,null,4)],{type:"application/json"}),a=URL.createObjectURL(s),n=document.createElement("a"),n.href=a,n.download="gpt_playground_export_".concat(new Date().getTime(),".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),r.abrupt("return",u);case 15:case"end":return r.stop()}},x)}));function y(){return f.apply(this,arguments)}return y}()}]),i}(),k=Q,w=e(64082),q=e(2058),P=e(23323),$=e(25278),T=e(14726),o=e(96311),B=e(28558),N=e(67294),K={settingModal:"settingModal___Z4BHM",settingModalMainContainer:"settingModalMainContainer___V8tIE",settingModalMenu:"settingModalMenu___XTpKy",modelItem:"modelItem___k8hgT"},t=e(85893),_=q.Z.Dragger,ee=function(f){var y=f.isSettingModalOpen,x=f.handleSettingOk,u=f.handleSettingCancel,s=(0,N.useState)("token"),a=D()(s,2),n=a[0],l=a[1],r=JSON.parse(localStorage.getItem("openai_config")||"{}"),c=(0,N.useState)((r==null?void 0:r.api_key)||""),h=D()(c,2),d=h[0],Z=h[1],S=(0,N.useState)((r==null?void 0:r.end_point)||""),ie=D()(S,2),ae=ie[0],me=ie[1];(0,N.useEffect)(function(){var R=JSON.parse(localStorage.getItem("openai_config")||"{}");R.api_key=d,R.end_point=ae||"https://api.openai.com",localStorage.setItem("openai_config",JSON.stringify(R))},[d,ae]);var pe=function(M){l(M.key)},fe=function(){var R=m()(j()().mark(function M(){var O;return j()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return O=new k,U.next=3,O.export();case 3:case"end":return U.stop()}},M)}));return function(){return R.apply(this,arguments)}}(),he=function(){var R=m()(j()().mark(function M(O){var J;return j()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:J=new FileReader,J.onload=function(){var Se=m()(j()().mark(function ue(se){var le,de,ce;return j()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return de=JSON.parse(se==null||(le=se.target)===null||le===void 0?void 0:le.result),ce=new k,b.next=4,ce.import(de);case 4:window.location.reload();case 5:case"end":return b.stop()}},ue)}));return function(ue){return Se.apply(this,arguments)}}(),J.readAsText(O);case 3:case"end":return re.stop()}},M)}));return function(O){return R.apply(this,arguments)}}(),ve=function(M){Z(M.api_key),me(M.end_point)},ge=function(){return n==="token"?(0,t.jsxs)(P.Z,{name:"basic",labelCol:{span:18},wrapperCol:{span:18},initialValues:{api_key:d,end_point:ae},onFinish:ve,autoComplete:"off",layout:"vertical",children:[(0,t.jsx)("h2",{children:"API KEY Settings"}),(0,t.jsx)("br",{}),(0,t.jsx)(P.Z.Item,{label:"API KEY",name:"api_key",rules:[{required:!0,message:""}],children:(0,t.jsx)($.Z,{})}),(0,t.jsx)(P.Z.Item,{label:"End Point",name:"end_point",rules:[{required:!1,message:""}],children:(0,t.jsx)($.Z,{})}),(0,t.jsx)(P.Z.Item,{wrapperCol:{offset:0,span:24},children:(0,t.jsx)(T.ZP,{type:"primary",htmlType:"submit",children:"Save"})})]}):n==="import_export"?(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Import & Export"}),(0,t.jsx)("br",{}),(0,t.jsx)("h3",{children:"Export"}),(0,t.jsx)(T.ZP,{type:"primary",onClick:fe,children:"Export"}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("h3",{children:"Import"}),(0,t.jsxs)(_,{multiple:!1,accept:".json, application/json",customRequest:function(O){he(O.file),console.log(O.file)},children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(w.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})]}):null},ye=[{key:"token",label:"API KEY"},{key:"import_export",label:"Import & Export"}];return(0,t.jsx)(o.Z,{title:"",open:y,onOk:x,onCancel:u,footer:null,closeIcon:null,classNames:{content:K.settingModal},width:Math.min(750,window.innerWidth-20),children:(0,t.jsxs)("div",{className:K.settingModalMainContainer,children:[(0,t.jsx)(B.Z,{mode:"inline",className:K.settingModalMenu,selectedKeys:[n],onClick:pe,items:ye}),(0,t.jsx)("div",{style:{padding:"20px",flex:1,overflowY:"auto"},children:ge()})]})})},H=ee,L=H,ne=e(42952),te=e(50228),I=e(38545),p=e(88634),C={mainMenuFooter:"mainMenuFooter___dbT6T"},v=function(f){var y=f.page,x=JSON.parse(localStorage.getItem("openai_config")||"{}"),u=(0,N.useState)(!x.api_key),s=D()(u,2),a=s[0],n=s[1],l=[{key:"setting",icon:(0,t.jsx)(ne.Z,{}),label:"Setting"}];y==="chat"&&l.unshift({key:"bot",icon:(0,t.jsx)(te.Z,{}),label:"Bots"}),y==="bot"&&l.unshift({key:"chat",icon:(0,t.jsx)(I.Z,{}),label:"Chats"});var r=function(Z){Z&&Z.key==="setting"?n(!0):p.history.push("/".concat(Z==null?void 0:Z.key))},c=function(){JSON.parse(localStorage.getItem("openai_config")||"{}").api_key&&n(!1)},h=function(){n(!1)};return(0,t.jsxs)("div",{className:C.mainMenuFooter,children:[(0,t.jsx)(B.Z,{items:l,onClick:r,selectable:!1}),(0,t.jsx)(L,{isSettingModalOpen:a,handleSettingOk:c,handleSettingCancel:h})]})},g=v},26222:function(oe,E,e){e.r(E),e.d(E,{default:function(){return te}});var Y=e(19632),D=e.n(Y),z=e(97857),j=e.n(z),V=e(15009),m=e.n(V),W=e(99289),A=e.n(W),X=e(5574),F=e.n(X),G=e(9981),Q=e(89705),k=e(88634),w=e(86250),q=e(25278),P=e(47988),$=e(14726),T=e(67294),o=e(85893);function B(I){var p=I.item,C=I.onRename,v=I.onDelete,g=(0,T.useState)(!1),i=F()(g,2),f=i[0],y=i[1],x=(0,T.useState)(p.name),u=F()(x,2),s=u[0],a=u[1],n=new G.Z(p.key),l=function(){var h=A()(m()().mark(function d(){return m()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return console.log(p.key,s),S.next=3,n.init();case 3:return S.next=5,n.renameChat(s);case 5:C&&C(p.key,s),y(!1);case 7:case"end":return S.stop()}},d)}));return function(){return h.apply(this,arguments)}}(),r=function(){var h=A()(m()().mark(function d(){return m()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,n.init();case 2:return S.next=4,n.deleteChat();case 4:v&&v(p.key);case 5:case"end":return S.stop()}},d)}));return function(){return h.apply(this,arguments)}}(),c=[{key:"rename",label:(0,o.jsx)("span",{onClick:function(){return y(!0)},children:"Rename"})},{key:"delete",danger:!0,label:(0,o.jsx)("span",{onClick:function(){return r()},children:"Delete"})}];return(0,o.jsxs)(w.Z,{gap:"0",className:"main-menu-item",justify:"space-between",align:"center",style:{width:"100%"},children:[(0,o.jsx)(k.Link,{to:p.path,className:"main-menu-link",children:f?(0,o.jsx)(q.Z,{value:s,onChange:function(d){return a(d.target.value)},onPressEnter:l,onBlur:l}):(0,o.jsx)("span",{children:s})}),f?null:(0,o.jsx)(P.Z,{menu:{items:c},trigger:["click"],className:"main-menu-action",children:(0,o.jsx)($.ZP,{icon:(0,o.jsx)(Q.Z,{}),size:"small",type:"text"})})]})}var N=B,K=e(73700),t=e(24969),_=e(64917),ee=e(30381),H=e.n(ee),L=e(80410),ne=function(p){var C=H()().startOf("day"),v={\u4ECA\u5929:[],\u524D\u51E0\u5929:[],\u524D30\u5929:[],\u66F4\u65E9:[]};return p.sort(function(g,i){return new Date(i.createdAt).getTime()-new Date(g.createdAt).getTime()}),p.forEach(function(g){var i=H()(g.createdAt);i.isSame(C,"day")?v.\u4ECA\u5929.push(g):i.isAfter(C.clone().subtract(7,"days"))?v.\u524D\u51E0\u5929.push(g):i.isAfter(C.clone().subtract(30,"days"))?v.\u524D30\u5929.push(g):v.\u66F4\u65E9.push(g)}),v},te=function(){var I=(0,T.useState)({}),p=F()(I,2),C=p[0],v=p[1],g=function(){var s=A()(m()().mark(function a(){var n,l;return m()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,G.Z.getChats();case 2:n=c.sent,l=ne(n),v(l);case 5:case"end":return c.stop()}},a)}));return function(){return s.apply(this,arguments)}}();(0,T.useEffect)(function(){g()},[]);var i=function(){var s=A()(m()().mark(function a(n){var l;return m()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:l=j()({},C),Object.keys(l).forEach(function(h){l[h]=l[h].filter(function(d){return d.id!==n})}),v(l),location.pathname.match(n)&&k.history.push("/");case 4:case"end":return c.stop()}},a)}));return function(n){return s.apply(this,arguments)}}(),f=function(){var a=function(){k.history.push("/chat")};return(0,o.jsx)(w.Z,{className:L.Z.mainMenuHeader,gap:"small",justify:"space-between",style:{width:"100%"},children:(0,o.jsx)($.ZP,{icon:(0,o.jsx)(t.Z,{}),shape:"circle",size:"small",onClick:a})})},y=function(){var a=[],n=[];return Object.keys(C).forEach(function(l){n.push({name:l,path:"/group/"+l,disabled:!0,type:"group",className:L.Z.mainMenuGroup}),n.push.apply(n,D()(C[l].map(function(r){return{path:"/chat/".concat(r.id),name:r.title||"Untitled Chat",type:"chat",key:r.id}})))}),[].concat(a,n)},x=function(a,n){return a.type==="group"?(0,o.jsx)("div",{className:L.Z.mainMenuGroupTitle,children:a.name}):a.type==="chat"?(0,o.jsx)(N,{item:a,onDelete:i}):n},u=function(){return(0,K.Z)({page:"chat"})};return(0,o.jsx)(_.f,{className:L.Z.mainLayout,siderWidth:240,contentStyle:{padding:0},menuHeaderRender:f,menuDataRender:y,menuItemRender:x,menuFooterRender:u,menuProps:{selectable:!1},collapsedButtonRender:function(){return(0,o.jsx)("div",{})},children:(0,o.jsx)(k.Outlet,{})})}},80410:function(oe,E){E.Z={mainLayout:"mainLayout___ENN4I",mainMenuGroupTitle:"mainMenuGroupTitle___hweHk","ant-menu":"ant-menu___y2T4k","ant-menu-item-disabled":"ant-menu-item-disabled___DfiXc","ant-pro-sider-menu":"ant-pro-sider-menu___L9jfK","ant-menu-item":"ant-menu-item___eeuhi","main-menu-item":"main-menu-item___LtHgB","main-menu-link":"main-menu-link___frrYk","main-menu-action":"main-menu-action___nUvpj","ant-menu-item-selected":"ant-menu-item-selected___erhGe"}}}]);
